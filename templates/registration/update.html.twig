{% extends 'base.html.twig' %}

{% block title %}Update{% endblock %}

{% block body %}
    <div class="form-container">
        <div class="form-card">
            <h1>Modifier mon profil :</h1>

            {{ form_errors(modificationForm) }}

            {{ form_start(modificationForm) }}

            {% if app.user.profilePicture %}
                <img src="{{ asset('uploads/profile_pictures/' ~ app.user.profilePicture) }}" alt="Photo de profil" class="profile_picture" />
                <a href="{{ path('app_delete_photo', {'id': app.user.id}) }}" class="deletePhoto">Supprimer</a>

            {% else %}
                {{ form_widget(modificationForm.profilePicture) }}
            {% endif %}

            {{ form_widget(modificationForm) }}

            {{ form_end(modificationForm) }}
        </div>
    </div>

    <script>
        document.getElementById('deletePhotoBtn').addEventListener('click', function() {
            document.getElementById('deletePhotoForm').submit();
        });
    </script>
{% endblock %}
